<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WORK | 制作的游戏</title>
    <link rel="stylesheet" href="style.css">
    <!-- 引入图标库 -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap" rel="stylesheet">
    <style>
        .glass-overlay {
            opacity: 1 !important;
            pointer-events: auto !important;
            padding-top: 0 !important;
            background: rgba(10, 10, 10, 0.6);
            backdrop-filter: blur(25px);
        }
    </style>
</head>
<body>

    <img id="bg-img" src="主页图片/bg.jpeg" alt="Background">

    <div class="glass-overlay">
        <div class="content-container">
            
            <header class="header">
                <div>
                    <h1>制作的游戏</h1>
                    <p style="color: var(--text-sub); margin-top: 5px;">代码与灵感的结晶</p>
                </div>
                <a href="index.html" class="back-btn">← 返回主页</a>
            </header>

            <!-- 列表区域：点击卡片触发 openDetail() -->
            <div class="bento-grid">

                <!-- 项目 1 -->
                <div class="card interactive span-2" onclick="openDetail('project1')">
                    <img src="卡片图片/制作游戏卡片.png"> 
                    <div class="card-tag">Unity / 已完成</div>
                    <h3>合成大欧派</h3>
                    <p style="color: #ccc; font-size: 0.9rem; margin-top: 10px;"></p>
                </div>

                <!-- 项目 2 -->
                <div class="card interactive span-2" onclick="openDetail('project2')">
                    <img src="制作游戏图片/数学推塔.png"> 
                    <div class="card-tag">Unity / 已完成</div>
                    <h3>数学推塔</h3>
                </div>

                <!-- 项目 3 -->
                <div class="card interactive span-row-2" onclick="openDetail('project3')">
                    <img src="制作游戏图片/骑士冲锋联机版.png">
                    <div class="card-tag">Unity / 半成品</div>
                    <h3>骑士冲锋联机版</h3>
                </div>

                <!-- 项目 4 -->
                <div class="card interactive" onclick="openDetail('project4')">
                    <img src="制作游戏图片/类吸血鬼幸存者.png">
                    <div class="card-tag">Unity / 半成品</div>
                    <h3>类吸血鬼幸存者</h3>
                </div>

                <!-- 项目 5 -->
                <div class="card interactive" onclick="openDetail('project5')">
                    <img src="制作游戏图片/2dRPG.png">
                    <div class="card-tag">Unity / 半成品</div>
                    <h3>2dRPG</h3>
                </div>

                <!-- 项目 6 -->
                <div class="card interactive" onclick="openDetail('project6')">
                    <img src="制作游戏图片/AI数字人.png">
                    <div class="card-tag">Unity / 半成品</div>
                    <h3>AI数字人</h3>
                </div>
            </div>

            <footer style="margin-top: 4rem; text-align: center; color: var(--text-sub); font-size: 0.8rem;">
                © 2026 瓶子|个人空间
            </footer>
        </div>
    </div>

    <!-- === 详情大弹窗 === -->
    <div id="detail-modal" class="modal-overlay" onclick="closeDetail(event)">
        <div class="modal-large-content">
            <!-- 关闭按钮 -->
            <div style="position: absolute; top: 20px; right: 20px; z-index: 10; cursor: pointer;" onclick="closeDetail(event, true)">
                <i class="ri-close-circle-fill" style="font-size: 2rem; color: rgba(255,255,255,0.8);"></i>
            </div>

            <div class="project-detail-layout">
                <!-- 左侧：媒体区 (JS 动态填充) -->
                <div class="project-media" id="modal-media">
                    <!-- 视频或图片将在这里生成 -->
                </div>

                <!-- 右侧：信息区 -->
                <div class="project-info">
                    <div class="project-meta" id="modal-tags">
                        <!-- 标签将在这里生成 -->
                    </div>
                    <h2 class="project-title" id="modal-title">标题</h2>
                    <p class="project-desc" id="modal-desc">
                        描述内容...
                    </p>

                    <div class="project-actions" id="modal-actions">
                        <!-- 按钮将在这里生成 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 数据配置区 (这是你最需要修改的地方) ---
        // 注意：B站 iframe 需要 high_quality=1 和 allowfullscreen
        const projectsData = {
            'project1': {
                title: "合成大欧派",
                tags: ["Unity", "已完成","双端"],
                desc: "低脂小黄油\n“合成大西瓜”的玩法\n合成更大的欧派会解锁新的动态涩图\n不够涩没办法了，毕竟自己不会画（动态效果是我自己做的），光是整这些美术素材就花了大部分时间，脚本代码倒是小问题。",
                mediaType: 'carousel', 
                images: [
                    "卡片图片/制作游戏卡片.png",
                    "制作游戏图片/合成大欧派1.jpeg",
                    "制作游戏图片/合成大欧派2.jpeg",
                    "制作游戏图片/合成大欧派3.jpeg",
                    "制作游戏图片/合成大欧派4.png"
                ],
                links: []
            },
            'project2': {
                title: "数学推塔",
                tags: ["Unity", "已完成","电脑端"],
                desc: "类似广告里的比大小爬塔小游戏\n别笑，你笑你也过不了第二关\n元气骑士素材还是太好用了。",
                mediaType: 'video',
                mediaContent: '<video controls src="制作游戏图片/数学推塔.mp4" style="width:100%; height:100%; object-fit:contain;"></video>',
                links: []
            },
            'project3': {
                title: "骑士冲锋联机版",
                tags: ["Unity", "半成品","双端","联机"],
                desc: "联机功能练手作\n电脑与手机都可以联机，联机方式类似于mc。",
                mediaType: 'video',
                mediaContent: '<video controls src="制作游戏图片/骑士冲锋联机版.mp4" style="width:100%; height:100%; object-fit:contain;"></video>',
                links: []
            },
             'project4': {
                title: "类吸血鬼幸存者",
                tags: ["Unity", "半成品","电脑端"],
                desc: "类吸血鬼幸存者\n第二个练手作。",
                mediaType: 'video',
                mediaContent: '<video controls src="制作游戏图片/类吸血鬼幸存者.mp4" style="width:100%; height:100%; object-fit:contain;"></video>',
                links: []
            },
             'project5': {
                title: "2Drpg",
                tags: ["Unity", "半成品","电脑端"],
                desc: "第一个练手作\n视频只展示了一部分内容，后面还做了剧情对话系统，任务系统，背包系统，地图传送跳转等等。",
                mediaType: 'video',
                mediaContent: '<video controls src="制作游戏图片/2dRPG.mp4" style="width:100%; height:100%; object-fit:contain;"></video>',
                links: []
            },
             'project6': {
                title: "AI数字人",
                tags: ["Unity", "半成品","双端"],
                desc: "老师下的任务\n用的API\n没有学过3D游戏模型不会弄怪怪的。",
                mediaType: 'video',
                mediaContent: '<video controls src="制作游戏图片/AI数字人.mp4" style="width:100%; height:100%; object-fit:contain;"></video>',
                links: []
            }
        };

        const modal = document.getElementById('detail-modal');
        const modalMedia = document.getElementById('modal-media');
        const modalTitle = document.getElementById('modal-title');
        const modalTags = document.getElementById('modal-tags');
        const modalDesc = document.getElementById('modal-desc');
        const modalActions = document.getElementById('modal-actions');

// 全局变量，记录当前轮播图的索引
    let currentSlideIndex = 0;
    let currentImages = []; // 暂存当前打开项目的图片数组

    // 1. 打开弹窗
    function openDetail(id) {
        const data = projectsData[id];
        if(!data) return;

        // 设置文本信息
        document.getElementById('modal-title').textContent = data.title;
        document.getElementById('modal-desc').innerText = data.desc;
        document.getElementById('modal-tags').innerHTML = data.tags.map(tag => `<span class="tag-badge">${tag}</span>`).join('');
        
        // 设置按钮
        document.getElementById('modal-actions').innerHTML = data.links.map(link => `
            <a href="${link.url}" target="_blank" class="action-btn ${link.type === 'primary' ? 'btn-primary' : 'btn-secondary'}">
                ${link.text} <i class="ri-arrow-right-up-line"></i>
            </a>
        `).join('');

        const mediaContainer = document.getElementById('modal-media');
        
        // --- 核心：根据类型生成内容 ---
        if(data.mediaType === 'video') {
            // 如果是视频
            mediaContainer.innerHTML = `<div class="video-wrapper">${data.mediaContent}</div>`;
        } 
        else if (data.mediaType === 'carousel') {
            // === 如果是轮播图 ===
            currentImages = data.images; // 保存图片数组
            currentSlideIndex = 0;       // 重置索引
            
            // 生成轮播图 HTML 结构
            let slidesHtml = currentImages.map((img, index) => 
                `<img src="${img}" class="carousel-slide ${index === 0 ? 'active' : ''}" id="slide-${index}">`
            ).join('');

            let indicatorsHtml = currentImages.map((_, index) => 
                `<div class="indicator-dot ${index === 0 ? 'active' : ''}" onclick="goToSlide(${index})" id="dot-${index}"></div>`
            ).join('');

            mediaContainer.innerHTML = `
                <div class="carousel-container">
                    ${slidesHtml}
                    <!-- 左右按钮 (只有多张图时才显示) -->
                    ${currentImages.length > 1 ? `
                        <button class="carousel-btn btn-prev" onclick="switchSlide(-1)"><i class="ri-arrow-left-s-line"></i></button>
                        <button class="carousel-btn btn-next" onclick="switchSlide(1)"><i class="ri-arrow-right-s-line"></i></button>
                    ` : ''}
                    <!-- 底部圆点 -->
                    <div class="carousel-indicators">
                        ${indicatorsHtml}
                    </div>
                </div>
            `;
        } 
        else {
            // 如果是单张图片 (兼容旧数据)
            mediaContainer.innerHTML = data.mediaContent;
        }

        document.getElementById('detail-modal').classList.add('active');
    }

    // 2. 切换上一张/下一张
    // step 为 1 代表下一张，-1 代表上一张
    function switchSlide(step) {
        if(currentImages.length <= 1) return;

        // 移除当前的 active 类
        document.getElementById(`slide-${currentSlideIndex}`).classList.remove('active');
        document.getElementById(`dot-${currentSlideIndex}`).classList.remove('active');

        // 计算新索引 (支持循环切换)
        currentSlideIndex = (currentSlideIndex + step + currentImages.length) % currentImages.length;

        // 添加新的 active 类
        document.getElementById(`slide-${currentSlideIndex}`).classList.add('active');
        document.getElementById(`dot-${currentSlideIndex}`).classList.add('active');
    }

    // 3. 点击圆点直接跳转
    function goToSlide(index) {
        if(index === currentSlideIndex) return;
        
        document.getElementById(`slide-${currentSlideIndex}`).classList.remove('active');
        document.getElementById(`dot-${currentSlideIndex}`).classList.remove('active');

        currentSlideIndex = index;

        document.getElementById(`slide-${currentSlideIndex}`).classList.add('active');
        document.getElementById(`dot-${currentSlideIndex}`).classList.add('active');
    }

    // 4. 关闭弹窗
    function closeDetail(event, force = false) {
        const modal = document.getElementById('detail-modal');
        if (force || event.target === modal) {
            modal.classList.remove('active');
            setTimeout(() => {
                document.getElementById('modal-media').innerHTML = '';
            }, 300);
        }
    }
    </script>
</body>
</html>